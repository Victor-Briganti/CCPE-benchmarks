#!/usr/bin/env sh

name=$1
task=$2
param=$3

if [[ "$name" != "default" ]] && [[ "$name" != "memo" ]] && [[ "$name" != "fast" ]]; then
  for ((i = 0 ; i < 10; i++)); do
    OMP_PROC_BIND=true perf stat -o /home/aJoaoBriganti/benchmarks/apps/kmeans/output/perf_kdd_cup_$name$task-drop$param-$i /home/aJoaoBriganti/benchmarks/apps/kmeans/bin/kmeans_$name.a < /home/aJoaoBriganti/benchmarks/apps/kmeans/input/kdd_cup.txt > /home/aJoaoBriganti/benchmarks/apps/kmeans/output/kdd_cup_$name$task-drop$param-$i
  done
elif [[ "$name" == "memo" ]]; then
  for ((i = 0 ; i < 10; i++)); do
    OMP_PROC_BIND=true perf stat -o /home/aJoaoBriganti/benchmarks/apps/kmeans/output/perf_kdd_cup_$name$task-threshold$param-$i /home/aJoaoBriganti/benchmarks/apps/kmeans/bin/kmeans_$name.a < /home/aJoaoBriganti/benchmarks/apps/kmeans/input/kdd_cup.txt > /home/aJoaoBriganti/benchmarks/apps/kmeans/output/kdd_cup_$name$task-threshold$param-$i
  done
else
  for ((i = 0 ; i < 10; i++)); do
    OMP_PROC_BIND=true perf stat -o /home/aJoaoBriganti/benchmarks/apps/kmeans/output/perf_kdd_cup_$name$task-$i /home/aJoaoBriganti/benchmarks/apps/kmeans/bin/kmeans_$name.a < /home/aJoaoBriganti/benchmarks/apps/kmeans/input/kdd_cup.txt > /home/aJoaoBriganti/benchmarks/apps/kmeans/output/kdd_cup_$name$task-$i
  done
fi

